- [03 역할, 책임, 협력](#03-역할-책임-협력)
  - [협력](#협력)
    - [협력이 설계를 위한 문맥을 결정한다.](#협력이-설계를-위한-문맥을-결정한다)
  - [책임](#책임)


# 03 역할, 책임, 협력
객체지향 패러다임의 관점에서 핵심은 `역할` `책임` `협력`이다.  
클래스, 상속, 지연 바인딩이 중요하지 않은 것은 아니지만 구현 측면에서 중요한 것이고 객체지향 패러다임의 본질과는 거리가 멀다. 객체지향의 본질은 협력하는 객체들의 공동체를 창조하는 것이다.

객체지향 원칙을 따르는 어플리케이션의 제어 흐름은 다양한 객체들 사이에 균형있게 분배된다.
- 협력: 객체들이 어플리케이션의 기능을 구현하기 위해 수행하는 상호작용
- 책임: 객체가 협력에 참여하기 위해 수행하는 로직
- 역할: 객체들이 협력 안에서 수행하는 책임들이 모인 객체가 수행하는 것


## 협력
두 객체 사이의 협력은 하나의 객체가 다른 객체에게 도움을 요청할 때 시작된다.  
`메시지 전송`은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다.  
객체는 오직 메시지 전달을 통해서만 자신의 요청을 전달할 수 있다.

```markdown
협력이란 어떤 객체가 다른 객체에게 무엇인가를 요청하는 것이다. 한 객체는 어떤 것이 필요할 때 다른 객체에게  
전적으로 위임하거나 서로 협력한다. 즉, 두 객체가 상호작용을 통해 더 큰 책임을 수행하는 것이다.  
객체 사이의 협력을 설계할 때는 객체를 서로 분리된 인스턴스가 아닌 협력하는 파트너로 인식해야 한다.
```

객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 `캡슐화` 하는 것이다. 변경의 파급 효과를 제한할 수 있어서 변경에도 자유로워진다.

### 협력이 설계를 위한 문맥을 결정한다.
객체가 가질 수 있는 상태와 행동을 어떤 기준으로 결정해야 할까?  
객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력으로 협력이 바뀌면 객체가 제공해야 하는 행동 역시 바뀌어야 한다.

- Movie의 행동은 영화 예매를 위한 협력에 의해 결정된다. 영화 상영과는 상관이 없다. 협력이 있기 때문에 객체가 존재한다.
- 객체의 상태를 결정하는 것은 행동이다. 객체는 스스로 상태를 결정하고 관리하기 때문에 객체가 수행하는 행동에 필요한 상태도 가지고 있어야 한다.
- 객체가 참여하는 협력이 행동과 상태를 결정하기 때문에 협력은 객체를 설계하는데 필요한 문맥을 제공한다.


## 책임
협력이 갖춰졌을 때 다음 할 일은 협력에 필요한 행동을 수행할 수 있는 적절한 객체를 찾는 것이다.  
협력에 참여하기 위해 객체가 수행하는 행동을 `책임`이라고 부른다.

책임이란 객체에 의해 정의되는 응집도 있는 행위의 집합으로 객체가 유지해야 하는 정보와 수행할 수 있는 행동에 대해 개략적으로 서술한 문장이다.  

객체의 책임은 객체가 무엇을 알고 있는가와 무엇을 할 수 있는가로 구성된다. 크레이그 라만은 이런 분류 체계에 따라 `하는 것`과 `아는 것`의 두 가지 범주로 나누어 세분화하고 있다.

- 하는 것
  - 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
  - 다른 객체의 행동을 시작시키는 것
  - 다른 객체의 활동을 제어하고 조절하는 것
  - 영화 예매 시스템에서 Screening의 책임은 영화를 예매하는 것이다. Movie는 요금을 계산하는 것이다.  
Screening은 영화를 예매할 수 있어야 한다.
- 아는 것
  - 사적인 정보에 관해 아는 것
  - 관련된 객체에 대해 아는 것
  - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
  - Screening은 자신이 상영할 영화를 알고 있어야 한다. Movie는 가격과 어떤 할인 정책이 적용됐는지 알고 있어야 한다.

