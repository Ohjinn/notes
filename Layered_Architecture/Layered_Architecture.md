- [관심사의 분리](#관심사의-분리)
  - [관심사 분리의 원칙](#관심사-분리의-원칙)
  - [관심사의 분리의 장점](#관심사의-분리의-장점)
- [응집도](#응집도)
- [결합도](#결합도)
- [Layered Architecture](#layered-architecture)
  - [Layered Architecture의 장단점](#layered-architecture의-장단점)
- [UUID](#uuid)

# 관심사의 분리
관심사 분리(separation of concern)는 컴퓨터 프로그램을 여러 섹션으로 분리하는 설계 원칙으로 SoC를 잘 구현하는 프로그램을 모듈혈 프로그램이라고 한다. 이는 잘 정의된 인터페이스를 가지는 코드 내부에 정보를 캡슐화함으로써 달성할 수 있다.

## 관심사 분리의 원칙
- 시스템 요소는 배타성과 목적의 특이성을 가져야 한다. 다른 요소의 책임을 공유하거나 관련 없는 책임을 포함해서는 안된다.
- 주어진 책임의 집합을 정의하는 논리적, 물리적 제약을 통해 경계를 세움으로써 얻을 수 있는데 애플리케이션의 핵심 동작을 정의하기 위한 메서드, 객체, 컴포넌트, 서비스, 소스 구성을 위한 폴더 계층구조, 처리 조직을 위한 애플리케이션 계층, 버전 라이브러리 및 설치관리자 등을 포함한다.
- 목표는 시스템을 개별 파트로 나누는 것이 아니라 일련의 책임을 반복하지 않는 응집력 있는 책임 집합의 요소로 시스템을 구성하는 것이다.

## 관심사의 분리의 장점
- 개별 컴포넌트의 중복과 특이성을 줄여 유지보수를 쉽게 만든다.
- 유지보수 용이성의 증가로 시스템 전체적으로 안정적이게 된다.
- 각 구성 요소가 하나의 일관된 책임만 담당해 자연스로운 확장 포인트로 이어진다.
- 구성 요소가 단일 목적에 집중하도록 요구함으로써 발생하는 분리가 다른 시스템에서 더 쉽게 재사용할 수 있게 이어진다.
- 유지보수성과 확장성의 증가로 해당 소프트웨어의 시장성과 채택률이 올라간다
- 프로그램의 디자인, 배포, 사용 측면에서 더 많은 자유도를 가져다 준다. 관심사의 분리가 잘 되어 있다면 모듈의 업그레이드, 재사용, 독립적 개발 등의 편의성이 올라간다.


# 응집도
응집도(cohension)란 모듈의 독립성을 나타내는 정도로 모듈 내부 구성요소 간 연관 정도이다. 하나의 모듈은 하나의 기능을 수행할수록 응집도가 높다. 응집도 유형은 다음과 같고 뒤로 갈 수록 응집도가 높아진다. 응집도는 높을수록 좋다.

우연적, 논리적, 시간적, 절차적, 통신적, 순차적, 기능적


# 결합도
결합도(coupling)란 모듈 내부가 아닌 외부의 모듈과의 연관도 또는 모듈간의 상호의존성으로 소프트웨어 구조에서 모듈간의 관련성을 측정하는 척도다. 결합도 유형은 다음과 같고 뒤로 갈수록 결합도가 높아진다. 결합도는 낮을수록 좋다

내용, 공통, 외부, 제어, 스탬프, 자료

# Layered Architecture
layered architecture pattern이란 가장 공통적인 아키텍쳐 패턴으로 n-tier 아키텍쳐 패턴으로도 알려져있다. 해당 패턴은 각 요소들이 수평적 계층에 위치해있고 각각의 계층들은 각각 특정한 역할을 수행한다.

레이어드 아키텍쳐는 몇개의 레이어로 나눌지 정해져있지 않고 대부분의 레이어드 아키텍쳐는 presentation, business, persistence, database의 4계층으로 나누어져 있다. 작은 어플리케이션을 3tier, 더 크고 복잡한 비즈니스 어플리케이션은 5 or more이다.

![layered architecture](https://www.oreilly.com/api/v2/epubs/9781491971437/files/assets/sapr_0101.png)

각각의 계층을 각자의 역할이 있는데 presentation 계층은 모든 유저 인터페이스와 브라우저 통신 로직을 가지고 있고, business 계층은 요청과 관련된 로직을 처리하는 책임이 있다. presentation 계층은 어떻게 사용자의 정보를 알아내는지 몰라도 된다. 이처럼 각각의 계층은 특정 비즈니스 요청을 충족하기 위해 수행해야 하는 작업에 대한 추상화한다.

레이어드 아키텍쳐의 가장 중요한 특징은 위에서 얘기했던 관심사의 분리다. 각각의 레이어는 닫혀있어야 한다. presentation 계층의 요청이 바로 persistence 계층으로 넘어가선 안된다.

![closed](https://www.oreilly.com/api/v2/epubs/9781491971437/files/assets/sapr_0102.png)

만약 presentation layer가 persistence layer와 직접 맞닿는다면 persistence layer의 SQL이 buisness layer와 presentation layer 모두 영향을 줘서 구성 요소간에 상호 의존선이 있는 긴밀하게 연결된 애플리케이션이 만들어지고 변화의 대가가 커진다

## Layered Architecture의 장단점
장점
- 간단하고 배워 써먹기 좋다
- 다른 레이어와 분리되어 있기 때문에 의존성이 줄어든다
- 분리된 구성요소로 테스트가 쉬우며 각 구성 요소를 개별적으로 테스트할 수 있다
- 비용이 낮다

단점
- 구조가 확장을 허용하지 않기 때문에 확장성이 좋지 않다
- 맞닿은 레이어간에는 상호 의존성이 존재한다
- 병렬처리가 불가능하다

# UUID
UUID(universally unique identifier)는 범용 고유 식별자로 고유성을 보장하기 위해 고안된 것으로  
겹칠 확률이 1/2^128이다.

자바에서는 java.util에 기본으로 탑재되어 있어 UUID 클래스를 선언함으로써 사용 가능하다.

```java
UUID.randomUUID().toString()
```

그 외에도 UUID의 무작위성을 대체해 시간에 따라 값이 점점 커지는

[ULID](https://github.com/ulid/spec)

ULID, UUID에 비해 자릿수를 줄인

[TSID](https://github.com/f4b6a3/tsid-creator)

등이 있다.


출처  
[관심사의 분리 - 블로그](https://aspiringcraftsman.com/2008/01/03/art-of-separation-of-concerns/)  
[layered architecture - oreilly](https://www.oreilly.com/library/view/software-architecture-patterns/9781491971437/ch01.html)